# –°–≤–æ–¥–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–æ–±–ª–µ–º—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ì—Ä–∏—à–∫—ç –ï–≤–≥–µ–Ω–∏–π** (ID: 2) –Ω–µ –∏–º–µ–µ—Ç `telegram_id` ‚ùå
   - Location: vorona
   - –°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–µ–Ω
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –µ–º—É –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

2. **–ì—Ä—É–ø–ø–æ–≤—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: –ù–µ —É–∫–∞–∑–∞–Ω"
   - **–ü—Ä–∏—á–∏–Ω–∞:** –°–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω–µ –¥–µ–ª–∞–ª JOIN —á–µ—Ä–µ–∑ `kuliga_group_trainings`
   - **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –û–±–Ω–æ–≤–ª–µ–Ω SQL –∑–∞–ø—Ä–æ—Å –≤ —Å–∫—Ä–∏–ø—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ `location`** –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö
   - **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ `location` –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö —Å–æ–∑–¥–∞–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ö–æ–¥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### `src/routes/kuliga-booking.js`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `location: slotLocation` –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É –ø—Ä–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ —Å–∞–π—Ç

#### `src/bot/client-bot.js`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `createKuligaOwnGroupBooking`:
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ `instructor_id` –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≥—Ä—É–ø–ø–æ–≤–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è)
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ `location` –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≥—Ä—É–ø–ø–æ–≤–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ `location` –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É, –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `createKuligaExistingGroupBooking`:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ `location` –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É

#### `src/bot/admin-notify.js`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

### 2. –°–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### `scripts/check-notifications-db.js`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (—á–µ—Ä–µ–∑ JOIN —Å `kuliga_group_trainings`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞–º–∏ –±–µ–∑ Telegram ID
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —Å–≤–æ–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ –°–æ–∑–¥–∞–Ω `NOTIFICATION_FIX_INSTRUCTIONS.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- ‚úÖ –°–æ–∑–¥–∞–Ω `NOTIFICATION_FIX_PLAN.md` - –ø–ª–∞–Ω –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω `scripts/fix-missing-telegram-id.sql` - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö telegram_id

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å `telegram_id` –¥–ª—è –ì—Ä–∏—à–∫—ç –ï–≤–≥–µ–Ω–∏–π

**–í–∞–∂–Ω–æ:** –£ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ "–ì—Ä–∏—à–∫—ç –ï–≤–≥–µ–Ω–∏–π" (ID: 2) –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `telegram_id`. –ë–µ–∑ –Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–ª—É—á–∏—Ç—å Telegram ID –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ (—á–µ—Ä–µ–∑ –±–æ—Ç–∞ `/start` –∏–ª–∏ —É —Å–∞–º–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞)
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –∑–∞–ø—Ä–æ—Å:
   ```sql
   UPDATE kuliga_instructors 
   SET telegram_id = 'TELEGRAM_ID_–ò–ù–°–¢–†–£–ö–¢–û–†–ê'
   WHERE id = 2;
   ```

### –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞

–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `src/routes/kuliga-booking.js`
- `src/bot/client-bot.js`
- `src/bot/admin-notify.js`
- `scripts/check-notifications-db.js` (–¥–ª—è –±—É–¥—É—â–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫)

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (PM2, systemd –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å-–º–µ–Ω–µ–¥–∂–µ—Ä)

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–∏—Å–µ–π `[NOTIFY]`
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏:
```bash
# –ü—Ä–∏–º–µ—Ä –¥–ª—è PM2
pm2 logs | grep NOTIFY

# –ò–ª–∏ –¥–ª—è systemd
journalctl -u your-app-name -f | grep NOTIFY
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥–∞—Ö:**
- `[NOTIFY] –í—ã–∑–æ–≤ notifyInstructorKuligaTrainingBooking –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞: ...`
- `[NOTIFY] ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É ...`
- `[NOTIFY] ‚ùå –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä ... –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ Telegram –±–æ—Ç–µ (telegram_id –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)` - –µ—Å–ª–∏ telegram_id –≤—Å–µ –µ—â–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º –∏–∑ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –±–µ–∑ Telegram ID: **1** (–ì—Ä–∏—à–∫—ç –ï–≤–≥–µ–Ω–∏–π)
- ‚úÖ –í—Å–µ —Å–ª–æ—Ç—ã –∏–º–µ—é—Ç `location`
- ‚úÖ –í—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–º–µ—é—Ç `location`
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –∏–º–µ—é—Ç `location`

## ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ

–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã. –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ:
1. –î–æ–±–∞–≤–∏—Ç—å `telegram_id` –¥–ª—è –ì—Ä–∏—à–∫—ç –ï–≤–≥–µ–Ω–∏–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

