# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

## üîç –ù–∞–±–ª—é–¥–µ–Ω–∏–µ

–ü–æ –ª–æ–≥–∞–º –≤–∏–¥–Ω–æ, —á—Ç–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è **–¥–≤–∞–∂–¥—ã** —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏:

### –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ (21:00:02):
- ‚úÖ **5 –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ–ª—É—á–∏–ª–∏** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚ùå **1 –∫–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ–ª—É—á–∏–ª** - "bot was blocked by the user"

### –í—Ç–æ—Ä–∞—è –ø–æ–ø—ã—Ç–∫–∞ (21:00:03, —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É):
- ‚ùå **–í—Å–µ 6 –∫–ª–∏–µ–Ω—Ç–æ–≤** –ø–æ–ª—É—á–∏–ª–∏ –æ—à–∏–±–∫—É "chat not found"

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
- –ó–∞–¥–∞—á–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã –±–µ–∑ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –í–æ–∑–º–æ–∂–Ω–æ, –¥–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω—ã (PM2, systemd, etc.)
- –í–æ–∑–º–æ–∂–Ω–æ, –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞/–ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∑–∞–¥–∞—á—É

### 2. –†–∞–∑–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤
- –í –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω (`TELEGRAM_BOT_TOKEN`)
- –í–æ –≤—Ç–æ—Ä–æ–π –ø–æ–ø—ã—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–æ–π —Ç–æ–∫–µ–Ω –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
- –≠—Ç–æ –º–æ–∂–µ—Ç –æ–±—ä—è—Å–Ω–∏—Ç—å, –ø–æ—á–µ–º—É –≤—Å–µ –ø–æ–ª—É—á–∞—é—Ç "chat not found"

### 3. –ü—Ä–æ–±–ª–µ–º–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∫–ª–∏–µ–Ω—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ë–î
- –ü—Ä–∏ –≤—Ç–æ—Ä–æ–º –∑–∞–ø—É—Å–∫–µ (–∑–∞ —Å–µ–∫—É–Ω–¥—É) —á—Ç–æ-—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è
- –ù–æ —ç—Ç–æ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (`src/services/scheduler.js`)
- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `isRunning` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–¥–∞—á
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º: –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
- –§–ª–∞–≥ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ `finally` –±–ª–æ–∫–µ

### 2. –í–∫–ª—é—á–µ–Ω—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ö—É–ª–∏–≥–∏ (`REMINDER_NOTIFICATIONS_FIX.md`)
- –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∏–∑ `kuliga_bookings` —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –≠—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å "chat not found" –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ—Ç–∑—ã–≤—ã

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:
```bash
pm2 list
# –∏–ª–∏
ps aux | grep node
# –∏–ª–∏
ps aux | grep "src/app.js"
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:** –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω.

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ:
```
"–ó–∞–¥–∞—á–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º"
```

–ï—Å–ª–∏ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –∑–Ω–∞—á–∏—Ç –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç.

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
echo $TELEGRAM_BOT_TOKEN
echo $ADMIN_BOT_TOKEN
```

**–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –±–æ—Ç–∞.

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ—Ç –ª–∏ –≤–Ω–µ—à–Ω–∏—Ö cron –∑–∞–¥–∞—á:
```bash
crontab -l
# –∏–ª–∏
cat /etc/cron.d/*
```

–í–æ–∑–º–æ–∂–Ω–æ, –µ—Å—Ç—å –≤–Ω–µ—à–Ω–∏–π cron, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã –≤—Ä—É—á–Ω—É—é.

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü–æ—á–µ–º—É "chat not found" –≤–æ –≤—Ç–æ—Ä–æ–π –ø–æ–ø—ã—Ç–∫–µ?

–ï—Å–ª–∏ –ø–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ —É—Å–ø–µ—à–Ω–∞ (5 –∏–∑ 6 –ø–æ–ª—É—á–∏–ª–∏), –∞ –≤—Ç–æ—Ä–∞—è –¥–∞–µ—Ç "chat not found" –¥–ª—è –≤—Å–µ—Ö, —ç—Ç–æ –º–æ–∂–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å:

1. **–î—Ä—É–≥–æ–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–π –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
2. **–î—Ä—É–≥–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –≤–æ–∑–º–æ–∂–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤–∞—è –ë–î, –≥–¥–µ –Ω–µ—Ç —ç—Ç–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
3. **–î—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å** - –≤–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å/—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º

### –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ—Ç–∑—ã–≤—ã - –≤—Å–µ –ø–æ–ª—É—á–∏–ª–∏ "chat not found"

–≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ö—É–ª–∏–≥–∏ –Ω–µ –±—ã–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ `getCompletedTrainingsToday()`. 

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏–∑ `REMINDER_NOTIFICATIONS_FIX.md`:
- ‚úÖ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ö—É–ª–∏–≥–∏ –±—É–¥—É—Ç –≤–∫–ª—é—á–µ–Ω—ã
- ‚úÖ –ö–ª–∏–µ–Ω—Ç—ã –±—É–¥—É—Ç –Ω–∞–π–¥–µ–Ω—ã
- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ—Ç–∑—ã–≤—ã –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

1. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑ `REMINDER_NOTIFICATIONS_FIX.md` (–≤–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –ö—É–ª–∏–≥–∏)
2. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (`src/services/scheduler.js`)
3. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω
4. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤
5. ‚è≥ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–û—à–∏–±–∫–∏ "chat not found" –∏ "bot was blocked" - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ Telegram API. –û–Ω–∏ –æ–∑–Ω–∞—á–∞—é—Ç:
- –ö–ª–∏–µ–Ω—Ç —É–¥–∞–ª–∏–ª –±–æ—Ç–∞ –∏–ª–∏ –Ω–µ –Ω–∞—á–∏–Ω–∞–ª –¥–∏–∞–ª–æ–≥
- –ö–ª–∏–µ–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞** - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∑–∞—â–∏—Ç–Ω—ã—Ö –º–µ—Ä —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–µ—à–µ–Ω–æ.

