# –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è PDF —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤: –ë–æ—Ç vs –í–µ–±-–ø–æ–∫—É–ø–∫–∞

## Background and Motivation

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —á–µ—Ä–µ–∑ –≤–µ–±-—Å–∞–π—Ç –≤ email –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è PDF –±–µ–∑ —ç–º–æ–¥–∑–∏, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ —Ç–æ—Ç –∂–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ –±–æ—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å —ç–º–æ–¥–∑–∏.

**–¶–µ–ª—å:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å PDF —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–ø–æ—Å–æ–±–∞ –ø–æ–∫—É–ø–∫–∏ (–±–æ—Ç –∏–ª–∏ –≤–µ–±-—Å–∞–π—Ç).

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- ‚úÖ PDF —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º–∏ –ø–æ –¥–∏–∑–∞–π–Ω—É, —à—Ä–∏—Ñ—Ç–∞–º, —Ä–∞–∑–º–µ—Ä–∞–º
- ‚úÖ –≠–º–æ–¥–∑–∏ –¥–æ–ª–∂–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–æ –≤—Å–µ—Ö PDF
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä PDF, —á—Ç–æ –∏ –≤ –±–æ—Ç–µ
- ‚úÖ –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Puppeteer

## Key Challenges and Analysis

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

**–ë–æ—Ç (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ):**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ë–æ—Ç ‚Üí /api/certificates/purchase ‚Üí generateCertificatePdf() ‚Üí 
PDF —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ public/generated/certificates/ ‚Üí pdf_url –≤ –ë–î ‚Üí Email —Å PDF ‚úÖ
```

**–í–µ–±-—Å–∞–π—Ç (–ø—Ä–æ–±–ª–µ–º–∞ —Å —ç–º–æ–¥–∑–∏):**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –§–æ—Ä–º–∞ ‚Üí /api/certificate/register ‚Üí pending_certificates ‚Üí 
SMS ‚Üí processPendingCertificate ‚Üí generateCertificatePdf() ‚Üí 
PDF —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ public/generated/certificates/ ‚Üí pdf_url –≤ –ë–î ‚Üí Email —Å PDF ‚ùå
```

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è:

1. **–†–∞–∑–Ω—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
   - –ë–æ—Ç: `/api/certificates/purchase` (–ø—Ä—è–º–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
   - –í–µ–±: `/api/certificate/register` ‚Üí `processPendingCertificate` (—á–µ—Ä–µ–∑ –ë–î)

2. **–†–∞–∑–Ω—ã–µ –ø—É—Ç–∏ –¥–∞–Ω–Ω—ã—Ö:**
   - –ë–æ—Ç: –¥–∞–Ω–Ω—ã–µ –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
   - –í–µ–±: –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ `pending_certificates` –≤ –ë–î

3. **–•—Ä–∞–Ω–µ–Ω–∏–µ PDF:**
   - –í—Å–µ PDF —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `public/generated/certificates/`
   - –§–æ—Ä–º–∞—Ç: `certificate_{–Ω–æ–º–µ—Ä}.pdf`
   - –ü—É—Ç—å –≤ –ë–î: `pdf_url` –ø–æ–ª–µ –≤ —Ç–∞–±–ª–∏—Ü–µ `certificates`
   - Email –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `pdf_url` –¥–ª—è –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è PDF

4. **–ü—Ä–æ–±–ª–µ–º–∞ —Å —ç–º–æ–¥–∑–∏:**
   - –õ–æ–∫–∞–ª—å–Ω–æ: —ç–º–æ–¥–∑–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: —ç–º–æ–¥–∑–∏ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –≤–µ–±-–ø–æ–∫—É–ø–∫–µ

## High-level Task Breakdown

### –≠—Ç–∞–ø 1: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ PDF
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –æ–¥–∏–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –±–æ—Ç–∞ –∏ –≤–µ–±–∞
- [x] –°—Ä–∞–≤–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Puppeteer –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö —Å–∏—Å—Ç–µ–º—ã
- [x] –ù–∞–π—Ç–∏ —Ä–∞–∑–ª–∏—á–∏—è –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 2: –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —ç–º–æ–¥–∑–∏
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ - —ç–º–æ–¥–∑–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - —ç–º–æ–¥–∑–∏ —Ç–µ—Ä—è—é—Ç—Å—è
- [x] –í—ã—è–≤–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ –∫–æ–¥–µ, –∞ –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ä–µ–¥–µ

### –≠—Ç–∞–ø 3: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF
- [ ] –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π –º–µ—Ç–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- [ ] –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Puppeteer
- [ ] –û–±–µ—Å–ø–µ—á–∏—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —ç–º–æ–¥–∑–∏

### –≠—Ç–∞–ø 4: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏—è
- [ ] –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤–µ–±-–ø–æ—Ç–æ–∫ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–≥–æ –∂–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å fallback –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è —ç–º–æ–¥–∑–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –≠—Ç–∞–ø 5: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] –°—Ä–∞–≤–Ω–∏—Ç—å PDF –æ—Ç –±–æ—Ç–∞ –∏ –≤–µ–±-—Å–∞–π—Ç–∞
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è –≤ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —ç–º–æ–¥–∑–∏

## Technical Implementation Plan

### 1. –ê–Ω–∞–ª–∏–∑ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ PDF:

**–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ñ–∞–∫—Ç—ã:**
- ‚úÖ –û–¥–∏–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä: `src/services/certificatePdfGenerator.js`
- ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Puppeteer
- ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ Chrome –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ PostgreSQL –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç–º–æ–¥–∑–∏

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å —ç–º–æ–¥–∑–∏:

**–õ–æ–∫–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ–∫–∞–∑–∞–ª–∏:**
- ‚úÖ Express.js –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç UTF-8
- ‚úÖ registerHandler –ø–æ–ª—É—á–∞–µ—Ç —ç–º–æ–¥–∑–∏
- ‚úÖ PostgreSQL —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —ç–º–æ–¥–∑–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä PDF —Å–æ–∑–¥–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π HTML —Å —ç–º–æ–¥–∑–∏

**–°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- ‚ùå –≠–º–æ–¥–∑–∏ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –≤–µ–±-–ø–æ–∫—É–ø–∫–µ
- ‚ùå PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ —ç–º–æ–¥–∑–∏
- ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 3. –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

**–í–∞—Ä–∏–∞–Ω—Ç A: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ –ø—Ä–æ—Ü–µ—Å—Å, —á—Ç–æ –∏ –≤ –±–æ—Ç–µ
- –ü—Ä—è–º–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ä–µ–¥—ã**
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —à—Ä–∏—Ñ—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–í–∞—Ä–∏–∞–Ω—Ç C: Fallback –º–µ—Ö–∞–Ω–∏–∑–º**
- –î–µ—Ç–µ–∫—Ü–∏—è –ø–æ—Ç–µ—Ä–∏ —ç–º–æ–¥–∑–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ –Ω–∞ Unicode —Å–∏–º–≤–æ–ª—ã
- –†–µ–∑–µ—Ä–≤–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä PDF

## Current Status / Progress Tracking

### Completed ‚úÖ
- –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—É—Ç–µ–π –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞ –∏ –≤–µ–±-—Å–∞–π—Ç–∞
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–º–æ–¥–∑–∏
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, —á—Ç–æ –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í—ã—è–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã

### In Progress üîÑ
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ PDF

### Pending ‚è≥
- –í—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏—è
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## Proposed Solution: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PDF –æ—Ç –±–æ—Ç–∞ –¥–ª—è email

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
–û—Å—Ç–∞–≤–ª—è–µ–º –ø–æ—á—Ç–∏ –≤—Å–µ –∫–∞–∫ –µ—Å—Ç—å, –Ω–æ –∫ –ø–∏—Å—å–º—É –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –≤ –±–æ—Ç–µ.

### –ê–Ω–∞–ª–∏–∑ —Ö—Ä–∞–Ω–µ–Ω–∏—è PDF:

**–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è PDF —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:**
- ‚úÖ **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è**: `public/generated/certificates/`
- ‚úÖ **–§–æ—Ä–º–∞—Ç**: `certificate_{–Ω–æ–º–µ—Ä}.pdf` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `certificate_123456.pdf`)
- ‚úÖ **–¢–∏–ø —Ñ–∞–π–ª–∞**: PDF (–Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- ‚úÖ **–ü—É—Ç—å –≤ –ë–î**: –ø–æ–ª–µ `pdf_url` –≤ —Ç–∞–±–ª–∏—Ü–µ `certificates`
- ‚úÖ **Email**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `pdf_url` –¥–ª—è –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è PDF

**–í–ê–ñ–ù–û: –û–¥–∏–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –≤—Å–µ—Ö!**
- ‚úÖ **–ë–æ—Ç**: `/api/certificates/purchase` ‚Üí `certificatePdfGenerator.generateCertificatePdf()`
- ‚úÖ **–í–µ–±**: `processPendingCertificate` ‚Üí `certificatePdfGenerator.generateCertificatePdf()`
- ‚úÖ **Email**: `emailQueueProcessor` ‚Üí `certificatePdfGenerator.generateCertificatePdf()`

**–í—Å–µ PDF –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ:**
1. **–û–¥–∏–Ω –∫–ª–∞—Å—Å**: `CertificatePdfGenerator`
2. **–û–¥–∏–Ω –º–µ—Ç–æ–¥**: `generateCertificatePdf()`
3. **–û–¥–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è**: `public/generated/certificates/`
4. **–û–¥–∏–Ω —Ñ–æ—Ä–º–∞—Ç**: `certificate_{–Ω–æ–º–µ—Ä}.pdf`

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç email —Å PDF:**
1. PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `public/generated/certificates/`
2. –ü—É—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `pdf_url` –≤ –ë–î
3. Email —Å–µ—Ä–≤–∏—Å —á–∏—Ç–∞–µ—Ç PDF –ø–æ –ø—É—Ç–∏ –∏–∑ `pdf_url`
4. PDF –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è –∫ email –∫–∞–∫ –≤–ª–æ–∂–µ–Ω–∏–µ

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

**–í–∞—Ä–∏–∞–Ω—Ç A: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ PDF**
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —á–µ—Ä–µ–∑ –≤–µ–±
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —É–∂–µ PDF –¥–ª—è —ç—Ç–æ–≥–æ –Ω–æ–º–µ—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- –ï—Å–ª–∏ –µ—Å—Ç—å - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π PDF
- –ï—Å–ª–∏ –Ω–µ—Ç - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π

**–í–∞—Ä–∏–∞–Ω—Ç B: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —á–µ—Ä–µ–∑ –±–æ—Ç-–ø—Ä–æ—Ü–µ—Å—Å**
- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `processPendingCertificate`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ –º–µ—Ç–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, —á—Ç–æ –∏ –≤ –±–æ—Ç–µ
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Puppeteer

**–í–∞—Ä–∏–∞–Ω—Ç C: Fallback –Ω–∞ –±–æ—Ç-PDF**
- –ü—Ä–∏ –≤–µ–±-–ø–æ–∫—É–ø–∫–µ —Å–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞—Ç—å—Å—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å PDF
- –ü—Ä–∏ –æ—à–∏–±–∫–µ —Å —ç–º–æ–¥–∑–∏ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "—á–∏—Å—Ç—É—é" –≤–µ—Ä—Å–∏—é
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- `src/routes/sms.js` - –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `processPendingCertificate`
- `src/services/certificatePdfGenerator.js` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ fallback –ª–æ–≥–∏–∫–∏
- –í–æ–∑–º–æ–∂–Ω–æ: `src/services/emailQueueProcessor.js` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ PDF

## Executor's Feedback or Assistance Requests

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã:**
1. –ö–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ: —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ä–µ–¥—ã?
2. –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –≤–µ–±-–ø–æ—Ç–æ–∫ –¥–ª—è –ø—Ä—è–º–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF?
3. –ù—É–∂–Ω–æ –ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å?

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏:**
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å—Å—è
- –ù—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–ù–∞—á–∞—Ç—å —Å **–í–∞—Ä–∏–∞–Ω—Ç–∞ A** (—É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä) –∫–∞–∫ –Ω–∞–∏–±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∏ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è.