# üìã –ü–õ–ê–ù –†–ê–ó–í–ò–¢–ò–Ø: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∞–π—Ç–∞ –∏ Telegram –±–æ—Ç–∞ + –ì—Ä—É–ø–ø–æ–≤—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ + –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 15.12.2025  
**–†–µ–∂–∏–º:** –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫

---

## üéØ –¶–ï–õ–ò –ò –ó–ê–î–ê–ß–ò

### –ó–∞–¥–∞—á–∞ 1: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ —Å–∞–π—Ç
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–∞–π—Ç, –æ–Ω –Ω–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –≤ Telegram –±–æ—Ç–µ. –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–æ–∑–∂–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ—Ç–∞, –µ–º—É –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∑–∞–Ω–æ–≤–æ.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∞ –±–æ—Ç–∞ –∏–∑ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–æ –æ–ø–ª–∞—Ç—ã) - —Å–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –≤ –ë–î —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–°—Ç–∞—Ä—Ç" –≤ –±–æ—Ç–µ - –¥–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ Telegram (telegram_id, username) –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –∫–ª–∏–µ–Ω—Ç—É
- –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —É—à–µ–ª —Å —Å–∞–π—Ç–∞, –∞ –ø–æ—Ç–æ–º –∫—Ç–æ-—Ç–æ —Å–∫–∏–Ω—É–ª –µ–º—É —Å—Å—ã–ª–∫—É –Ω–∞ –±–æ—Ç–∞ - –æ–Ω –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∞—Ç—å "–°—Ç–∞—Ä—Ç" –∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∑–∞–Ω–æ–≤–æ
- –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —É—Å–ø–µ—Ö–∞ —Ç–æ–∂–µ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞ - –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ

### –ó–∞–¥–∞—á–∞ 2: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —á–µ—Ä–µ–∑ —Å–∞–π—Ç
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —Å –≤—ã–±–æ—Ä–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (2, 3, 4 –∏ —Ç.–¥.)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≥—Ä—É–ø–ø–æ–≤—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã

### –ó–∞–¥–∞—á–∞ 3: –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö –≤–∏–¥–æ–≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞, –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤, –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç–µ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º –∏–∑ –±–æ—Ç–∞)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `EmailService` (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤)

---

## üìä –¢–ï–ö–£–©–ê–Ø –°–ò–°–¢–ï–ú–ê (–ê–ù–ê–õ–ò–ó)

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ —Å–∞–π—Ç

**–ì–¥–µ:** `src/routes/kuliga-booking.js` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `upsertClient()`

**–õ–æ–≥–∏–∫–∞:**
1. –ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É —Ç–µ–ª–µ—Ñ–æ–Ω—É
2. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω:
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `email` (–µ—Å–ª–∏ –±—ã–ª –ø—É—Å—Ç–æ–π)
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `birth_date` (–µ—Å–ª–∏ –±—ã–ª –≤—Ä–µ–º–µ–Ω–Ω—ã–º `1900-01-01`)
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `{ id, telegram_id }`
3. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω:
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º `email`
   - `telegram_id` = `NULL` (–Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è!)
   - `birth_date` = —É–∫–∞–∑–∞–Ω–Ω–∞—è –¥–∞—Ç–∞ –∏–ª–∏ `1900-01-01`

**–ü—Ä–æ–±–ª–µ–º–∞:** `telegram_id` –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ —Å–∞–π—Ç, –ø–æ—ç—Ç–æ–º—É –∫–ª–∏–µ–Ω—Ç –Ω–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –≤ –±–æ—Ç–µ.

---

### 2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Telegram –±–æ—Ç–µ

**–ì–¥–µ:** `src/bot/client-bot.js` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `registerClient()` –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `/start`

**–õ–æ–≥–∏–∫–∞ –ø—Ä–∏ `/start`:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ `telegram_id`
2. –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ—Ç:
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –∏–∑ `/start REFERRAL_CODE` (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ `wait_start` —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Telegram
3. –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω:
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

**–õ–æ–≥–∏–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (`registerClient`):**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ `telegram_id` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –ø–æ `telegram_id`:
   - –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
   - –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É:
     - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `telegram_id`, `telegram_username`, `nickname`
     - –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥—Ä—É–≥–∏–µ –ø–æ–ª—è (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å)
   - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω:
     - –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ —Å–∞–π—Ç (–±–µ–∑ `telegram_id`), –Ω–æ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º, —Ç–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –±–æ—Ç–µ –æ–Ω –¥–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏—Å—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É. –ù–æ –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç –≤–≤–µ–ª —Ç–æ—Ç –∂–µ —Ç–µ–ª–µ—Ñ–æ–Ω, —á—Ç–æ –∏ –Ω–∞ —Å–∞–π—Ç–µ.

---

### 3. Deep Links –≤ Telegram

**–¢–µ–∫—É—â–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
- `/start REFERRAL_CODE` - –¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/start CLIENT_ID` –∏–ª–∏ `/start PHONE_HASH` –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- `src/bot/client-bot.js:12348` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `/start(.*)`
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä: `match[1]` (–≤—Å–µ –ø–æ—Å–ª–µ `/start`)

---

### 4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
- `src/services/emailService.js` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å
- –ú–µ—Ç–æ–¥ `sendEmail(recipientEmail, subject, htmlContent, attachments)`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤: `sendCertificateEmail()`

**Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
- `src/services/notification-service.js` - —Å–µ—Ä–≤–∏—Å –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö
- `src/bot/admin-notify.js` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞–º
- –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Telegram Bot API

**–¢–µ–∫—É—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏:**
- –í `src/routes/kuliga-payment.js` (webhook handler) - –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –í `src/routes/kuliga-stuck-payments.js` - –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Ä—É—á–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –í `src/bot/admin-notify.js` - –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `notifyAdminNaturalSlopeTrainingBooking()` –∏ `notifyInstructorKuligaTrainingBooking()`

---

### 5. –ì—Ä—É–ø–ø–æ–≤—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- `src/routes/kuliga-booking.js` ‚Üí `createGroupBooking()` - –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –≥—Ä—É–ø–ø–æ–≤—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
- `src/routes/kuliga-booking.js` ‚Üí `createProgramBooking()` - –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º—É (—Å–æ–∑–¥–∞–µ—Ç –≥—Ä—É–ø–ø–æ–≤—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- –û–±–∞ –º–µ—Ç–æ–¥–∞ —Å–æ–∑–¥–∞—é—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ä–∞–∑—É (–±–µ–∑ –æ–ø–ª–∞—Ç—ã)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (2, 3, 4 –∏ —Ç.–¥.) —á–µ—Ä–µ–∑ —Å–∞–π—Ç. –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –±–æ—Ç–∞.

---

## üîß –†–ï–®–ï–ù–ò–Ø –ò –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –ó–ê–î–ê–ß–ê 1: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç

#### –†–µ—à–µ–Ω–∏–µ 1.1: Deep Link —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –∫–ª–∏–µ–Ω—Ç–∞

**–ò–¥–µ—è:** –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∞ –±–æ—Ç–∞ –∏–∑ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª–∏–µ–Ω—Ç–∞ (–∏–ª–∏ —Ö–µ—à —Ç–µ–ª–µ—Ñ–æ–Ω–∞) –≤ deep link.

**–§–æ—Ä–º–∞—Ç deep link:**
```
https://t.me/Ski_Instruktor72_bot?start=client_{CLIENT_ID}
–∏–ª–∏
https://t.me/Ski_Instruktor72_bot?start=phone_{PHONE_HASH}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ª–æ–≥–∏–∫–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —É—à–µ–ª —Å —Å–∞–π—Ç–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ù—É–∂–Ω–æ –∑–Ω–∞—Ç—å `client_id` –¥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
- –•–µ—à —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω (UUID), –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑—ã–≤–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ —Å —Å–µ—Å—Å–∏–µ–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

#### –†–µ—à–µ–Ω–∏–µ 1.2: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É

**–ò–¥–µ—è:** –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É –±–æ—Ç–∞ –≤ —Ñ–æ—Ä–º–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–∑—ã–≤–∞—Ç—å API endpoint `/api/kuliga/pre-register-client`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –≤ –ë–î —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –ó–∞—Ç–µ–º –≤ deep link –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `client_id`.

**–¢–µ–∫—É—â–∏–π endpoint:** `/api/kuliga/pre-register-client` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç! (—Å—Ç—Ä–æ–∫–∞ 862 –≤ `kuliga-booking.js`)

**–õ–æ–≥–∏–∫–∞:**
1. –ö–ª–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ö–ª–∏–µ–Ω—Ç –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ —Å—Å—ã–ª–∫—É –±–æ—Ç–∞
3. JavaScript –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –Ω–∞ `/api/kuliga/pre-register-client` —Å –¥–∞–Ω–Ω—ã–º–∏ —Ñ–æ—Ä–º—ã
4. –°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –≤ –ë–î (–±–µ–∑ `telegram_id`)
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `client_id`
6. Deep link —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `https://t.me/Ski_Instruktor72_bot?start=client_{CLIENT_ID}`
7. –ü—Ä–∏ `/start client_{CLIENT_ID}` –≤ –±–æ—Ç–µ:
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è `client_id`
   - –ò—â–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç –ø–æ `client_id`
   - –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –∏ `telegram_id` –ø—É—Å—Ç–æ–π:
     - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `telegram_id` –∏–∑ Telegram
     - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: "–í—ã —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã! –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã."
   - –ï—Å–ª–∏ `telegram_id` —É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω:
     - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —Å–æ–≤–ø–∞–¥–∞–µ—Ç –ª–∏ —Å —Ç–µ–∫—É—â–∏–º `telegram_id`
     - –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
     - –ï—Å–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É
- –ù–µ –Ω—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–Ω–æ–≤–æ –≤ –±–æ—Ç–µ
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —É—à–µ–ª —Å —Å–∞–π—Ç–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ù—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å API –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É (–º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ)
- –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–µ –Ω–∞–∂–º–µ—Ç –Ω–∞ —Å—Å—ã–ª–∫—É, –∫–ª–∏–µ–Ω—Ç –≤—Å–µ —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞—Å—Ç—Å—è –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏

#### –†–µ—à–µ–Ω–∏–µ 1.3: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –±–æ—Ç–µ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø) ‚≠ê

**–ò–¥–µ—è:** –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –±–æ—Ç–µ, —á—Ç–æ–±—ã –ø—Ä–∏ –≤–≤–æ–¥–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏–ª—Å—è –≤ –ë–î –∏ —Å–≤—è–∑—ã–≤–∞–ª—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å—å—é.

**–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞:** –í `registerClient()` —É–∂–µ –µ—Å—Ç—å –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É, –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –ø–æ `telegram_id`.

**–£–ª—É—á—à–µ–Ω–∏–µ:**
1. –ü—Ä–∏ `/start` –∏–∑–≤–ª–µ–∫–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä (–µ—Å–ª–∏ –µ—Å—Ç—å)
2. –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä = `client_{CLIENT_ID}`:
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å `client_id` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–≤–≤–æ–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞) –ø—Ä–æ–≤–µ—Ä—è—Ç—å:
     - –ï—Å–ª–∏ `client_id` —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∏ –∫–ª–∏–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω –ø–æ `client_id`:
       - –û–±–Ω–æ–≤–ª—è—Ç—å `telegram_id` —ç—Ç–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
       - –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å –≤–≤–æ–¥ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î)
     - –ï—Å–ª–∏ `client_id` –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω:
       - –ò—Å–∫–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É (–∫–∞–∫ —Å–µ–π—á–∞—Å)
       - –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω - –æ–±–Ω–æ–≤–ª—è—Ç—å `telegram_id`
       - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ deep link (–ø–æ–∏—Å–∫ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É)
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ (–Ω–µ –ø–µ—Ä–µ–¥–∞–µ–º —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ URL)

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ö–ª–∏–µ–Ω—Ç –≤—Å–µ —Ä–∞–≤–Ω–æ –¥–æ–ª–∂–µ–Ω –≤–≤–µ—Å—Ç–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –≤ –±–æ—Ç–µ
- –ù–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É, –æ–Ω —Å—Ä–∞–∑—É –ø–æ–ø–∞–¥–∞–ª –≤ –º–µ–Ω—é –±–µ–∑ –ø–æ–ª–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–û–ï –†–ï–®–ï–ù–ò–ï: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –†–µ—à–µ–Ω–∏—è 1.2 –∏ 1.3

1. **–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É –±–æ—Ç–∞ –≤ —Ñ–æ—Ä–º–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:**
   - –í—ã–∑—ã–≤–∞—Ç—å `/api/kuliga/pre-register-client` (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å `client_id` –≤ `sessionStorage` –∏–ª–∏ `localStorage`
   - –§–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å deep link: `https://t.me/Ski_Instruktor72_bot?start=client_{CLIENT_ID}`

2. **–ü—Ä–∏ `/start client_{CLIENT_ID}` –≤ –±–æ—Ç–µ:**
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å `client_id` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–∏ –≤–≤–æ–¥–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞:
     - –ï—Å–ª–∏ `client_id` —Å–æ—Ö—Ä–∞–Ω–µ–Ω - –∏—Å–∫–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ `client_id`
     - –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –∏ `telegram_id` –ø—É—Å—Ç–æ–π:
       - –û–±–Ω–æ–≤–ª—è—Ç—å `telegram_id`
       - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î (–∏–º—è, email, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è)
       - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã."
     - –ï—Å–ª–∏ `client_id` –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω - –∏—Å–∫–∞—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É (–∫–∞–∫ —Å–µ–π—á–∞—Å)

3. **–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã:**
   - –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —É—Å–ø–µ—Ö–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å deep link —Å `client_id` –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
   - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ –±–æ—Ç–µ

---

### –ó–ê–î–ê–ß–ê 2: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫

#### –†–µ—à–µ–Ω–∏–µ 2.1: –î–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —Ñ–æ—Ä–º—É

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- `createGroupBooking()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `participantsCount` –∏ `participantsNames`
- –ù–æ –≤ —Ñ–æ—Ä–º–µ –Ω–µ—Ç –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫)

**–ü–ª–∞–Ω:**
1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —Ñ–æ—Ä–º—É –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
2. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—è –¥–ª—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
3. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `participantsCount` –∏ `participantsNames` –≤ API

**–ì–¥–µ –∏–∑–º–µ–Ω–∏—Ç—å:**
- `public/js/kuliga-booking.js` - –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- `views/kuliga-booking.ejs` - –¥–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

#### –†–µ—à–µ–Ω–∏–µ 2.2: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- `createProgramBooking()` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ù–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –æ–Ω–æ —á–µ—Ä–µ–∑ —Å–∞–π—Ç

**–ü–ª–∞–Ω:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Ñ–æ—Ä–º–∞ –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º –Ω–∞ —Å–∞–π—Ç–µ
2. –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É
3. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º—è
4. –ü—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥—Ä—É–ø–ø–æ–≤—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–∫–∞–∫ —Å–µ–π—á–∞—Å)

---

### –ó–ê–î–ê–ß–ê 3: –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### –†–µ—à–µ–Ω–∏–µ 3.1: Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–ì–¥–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:**
- –í `src/routes/kuliga-payment.js` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (webhook handler)
- –í `src/routes/kuliga-stuck-payments.js` –ø—Ä–∏ —Ä—É—á–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

**–ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:**
1. **–ö–ª–∏–µ–Ω—Ç—É:**
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
   - –î–µ—Ç–∞–ª–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–¥–∞—Ç–∞, –≤—Ä–µ–º—è, –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –º–µ—Å—Ç–æ, —Å—Ç–æ–∏–º–æ—Å—Ç—å)
   - –°—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

2. **–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É:**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
   - –î–µ—Ç–∞–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `notifyInstructorKuligaTrainingBooking()` –∏–∑ `admin-notify.js`

3. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É:**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `notifyAdminNaturalSlopeTrainingBooking()` –∏–∑ `admin-notify.js`

**–®–∞–±–ª–æ–Ω—ã email:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `EmailService.sendEmail()`
- –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### –†–µ—à–µ–Ω–∏–µ 3.2: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

**–ì–¥–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:**
- –í `src/routes/kuliga-payment.js` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ `telegram_id` —É –∫–ª–∏–µ–Ω—Ç–∞
- –ï—Å–ª–∏ `telegram_id` –µ—Å—Ç—å - –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram Bot API

**–ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:**
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º –∏–∑ –±–æ—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ `client-bot.js`

#### –†–µ—à–µ–Ω–∏–µ 3.3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–º–µ–Ω–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–ì–¥–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:**
- –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (webhook —Å —Å—Ç–∞—Ç—É—Å–æ–º `FAILED` –∏–ª–∏ `REFUNDED`)
- –ü—Ä–∏ —Ä—É—á–Ω–æ–π –æ—Ç–º–µ–Ω–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

**–ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:**
- Email –∫–ª–∏–µ–Ω—Ç—É –æ–± –æ—Ç–º–µ–Ω–µ
- Email –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É –æ–± –æ—Ç–º–µ–Ω–µ
- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É (–µ—Å–ª–∏ –µ—Å—Ç—å `telegram_id`)

#### –†–µ—à–µ–Ω–∏–µ 3.4: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- `src/services/notification-service.js` —É–∂–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç `sendTrainingReminders()`
- –ù–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —ç—Ç–æ –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ —Å–∞–π—Ç

**–ü–ª–∞–Ω:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ª–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–ª—è `kuliga_bookings`
2. –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `NotificationService`

---

## üìù –ü–û–î–†–û–ë–ù–´–ô –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –≠–¢–ê–ü 1: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç

#### –ó–∞–¥–∞—á–∞ 1.1: –û–±–Ω–æ–≤–∏—Ç—å —Ñ–æ—Ä–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–§–∞–π–ª—ã:**
- `public/js/kuliga-booking.js`
- `views/kuliga-booking.ejs`

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É –±–æ—Ç–∞ –≤—ã–∑—ã–≤–∞—Ç—å `/api/kuliga/pre-register-client`
2. –°–æ—Ö—Ä–∞–Ω—è—Ç—å `client_id` –≤ `sessionStorage`
3. –§–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å deep link —Å `client_id`
4. –û—Ç–∫—Ä—ã–≤–∞—Ç—å –±–æ—Ç–∞ —Å deep link

**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:** –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É –±–æ—Ç–∞ –∫–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –ë–î, deep link —Å–æ–¥–µ—Ä–∂–∏—Ç `client_id`.

---

#### –ó–∞–¥–∞—á–∞ 1.2: –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `/start` –≤ –±–æ—Ç–µ

**–§–∞–π–ª—ã:**
- `src/bot/client-bot.js`

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–∏ `/start client_{CLIENT_ID}` —Å–æ—Ö—Ä–∞–Ω—è—Ç—å `client_id` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–≤–≤–æ–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞):
   - –ï—Å–ª–∏ `client_id` —Å–æ—Ö—Ä–∞–Ω–µ–Ω - –∏—Å–∫–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ `client_id`
   - –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –∏ `telegram_id` –ø—É—Å—Ç–æ–π:
     - –û–±–Ω–æ–≤–ª—è—Ç—å `telegram_id`
     - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
     - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —É—Å–ø–µ—à–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - –ï—Å–ª–∏ `client_id` –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω - –∏—Å–∫–∞—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É (–∫–∞–∫ —Å–µ–π—á–∞—Å)

**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:** –ü—Ä–∏ `/start client_{CLIENT_ID}` –∏ –≤–≤–æ–¥–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

#### –ó–∞–¥–∞—á–∞ 1.3: –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã

**–§–∞–π–ª—ã:**
- `views/booking-success.ejs`
- `src/routes/kuliga-payment.js` (–¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ `client_id`)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ –ø–æ–ª—É—á–∞—Ç—å `client_id` –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2. –§–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å deep link —Å `client_id`
3. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –±–æ—Ç–∞ —Å deep link

**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:** –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —É—Å–ø–µ—Ö–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç `client_id`.

---

### –≠–¢–ê–ü 2: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫

#### –ó–∞–¥–∞—á–∞ 2.1: –î–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —Ñ–æ—Ä–º—É –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫

**–§–∞–π–ª—ã:**
- `public/js/kuliga-booking.js`
- `views/kuliga-booking.ejs`

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (2, 3, 4, 5, 6)
2. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—è –¥–ª—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
3. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `participantsCount` –∏ `participantsNames` –≤ API

**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:** –í —Ñ–æ—Ä–º–µ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –≤–≤–µ—Å—Ç–∏ –∏—Ö –∏–º–µ–Ω–∞.

---

#### –ó–∞–¥–∞—á–∞ 2.2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º

**–§–∞–π–ª—ã:**
- `public/js/kuliga-booking.js`
- `views/kuliga-booking.ejs`
- `src/routes/kuliga-booking.js` (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å `createProgramBooking`)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Ñ–æ—Ä–º–∞ –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º
2. –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É
3. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º—è
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É `createProgramBooking()`

**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:** –ú–æ–∂–Ω–æ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ —á–µ—Ä–µ–∑ —Å–∞–π—Ç.

---

### –≠–¢–ê–ü 3: –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### –ó–∞–¥–∞—á–∞ 3.1: Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª—ã:**
- `src/routes/kuliga-payment.js` (webhook handler)
- `src/services/emailService.js` (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å email –∫–ª–∏–µ–Ω—Ç—É
2. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å email –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `notifyInstructorKuligaTrainingBooking()`)
3. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `notifyAdminNaturalSlopeTrainingBooking()`)
4. –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω—ã email –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É, –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.

---

#### –ó–∞–¥–∞—á–∞ 3.2: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

**–§–∞–π–ª—ã:**
- `src/routes/kuliga-payment.js` (webhook handler)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ `telegram_id` —É –∫–ª–∏–µ–Ω—Ç–∞
2. –ï—Å–ª–∏ `telegram_id` –µ—Å—Ç—å - –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram Bot API
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ `client-bot.js`

**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:** –ö–ª–∏–µ–Ω—Ç—ã —Å `telegram_id` –ø–æ–ª—É—á–∞—é—Ç Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

---

#### –ó–∞–¥–∞—á–∞ 3.3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–º–µ–Ω–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª—ã:**
- `src/routes/kuliga-payment.js` (webhook handler –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ `FAILED` –∏–ª–∏ `REFUNDED`)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å email –∫–ª–∏–µ–Ω—Ç—É
2. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å email –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É
3. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É (–µ—Å–ª–∏ –µ—Å—Ç—å `telegram_id`)

**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:** –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É.

---

#### –ó–∞–¥–∞—á–∞ 3.4: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö

**–§–∞–π–ª—ã:**
- `src/services/notification-service.js` (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å)
- `src/services/scheduler.js` (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ª–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–ª—è `kuliga_bookings`
2. –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `NotificationService`

**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:** –ö–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö –∑–∞ –¥–µ–Ω—å –¥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏.

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´

1. **–í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:**
   - –ó–∞–¥–∞—á–∞ 1.2: –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `/start` –≤ –±–æ—Ç–µ (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤)
   - –ó–∞–¥–∞—á–∞ 3.1: Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

2. **–°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:**
   - –ó–∞–¥–∞—á–∞ 1.1: –û–±–Ω–æ–≤–∏—Ç—å —Ñ–æ—Ä–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –ó–∞–¥–∞—á–∞ 2.1: –î–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —Ñ–æ—Ä–º—É –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
   - –ó–∞–¥–∞—á–∞ 3.2: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

3. **–ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:**
   - –ó–∞–¥–∞—á–∞ 1.3: –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
   - –ó–∞–¥–∞—á–∞ 2.2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º
   - –ó–∞–¥–∞—á–∞ 3.3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–º–µ–Ω–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ó–∞–¥–∞—á–∞ 3.4: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö

---

## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

**–°—Ç–∞—Ç—É—Å:** üìã –ü–õ–ê–ù –°–û–ó–î–ê–ù

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ù–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å –∑–∞–¥–∞—á –≤—ã—Å–æ–∫–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é –∑–∞–¥–∞—á—É –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–ª–µ–¥—É—é—â–µ–π

---

## üîç –í–û–ü–†–û–°–´ –î–õ–Ø –£–¢–û–ß–ù–ï–ù–ò–Ø

1. **Deep Link —Ñ–æ—Ä–º–∞—Ç:** –ö–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ?
   - `client_{CLIENT_ID}` (–ø—Ä–æ—Å—Ç–æ–π)
   - `token_{UUID}` (–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, –Ω–æ —Å–ª–æ–∂–Ω–µ–µ)

2. **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** –í—ã–∑—ã–≤–∞—Ç—å –ª–∏ `/api/kuliga/pre-register-client` –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É –∏–ª–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã?

3. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫?

4. **–®–∞–±–ª–æ–Ω—ã email:** –ù—É–∂–Ω—ã –ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏–ª–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π HTML?

5. **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:** –ó–∞ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è? (—Å–µ–π—á–∞—Å –≤ —Å–∏—Å—Ç–µ–º–µ –µ—Å—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ –¥–µ–Ω—å)

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 15.12.2025
