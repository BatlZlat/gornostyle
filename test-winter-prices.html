<!DOCTYPE html>
<html>
<head>
    <title>Test Winter Prices</title>
</head>
<body>
    <h1>–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∞–π—Å–∞</h1>
    <button id="testBtn">–ù–∞–∂–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∞</button>
    <div id="result"></div>
    
    <script>
        // –ü–æ–ª—É—á–∏—Ç—å cookie –ø–æ –∏–º–µ–Ω–∏
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
            return null;
        }
        
        document.getElementById('testBtn').addEventListener('click', async () => {
            console.log('üî¥ –¢–ï–°–¢: –ù–∞—á–∞–ª–æ —Ç–µ—Å—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∞–π—Å–∞');
            const result = document.getElementById('result');
            result.innerHTML = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            
            try {
                const token = getCookie('adminToken');
                console.log('üî¥ –¢–ï–°–¢: –¢–æ–∫–µ–Ω –Ω–∞–π–¥–µ–Ω:', token ? '–î–ê' : '–ù–ï–¢');
                
                const response = await fetch('/api/winter-prices', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                console.log('üî¥ –¢–ï–°–¢: –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞:', response.status);
                
                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞: ' + response.status);
                }
                
                const data = await response.json();
                console.log('üî¥ –¢–ï–°–¢: –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã:', data);
                
                let prices = Array.isArray(data) ? data : (data.data || data.rows || []);
                console.log('üî¥ –¢–ï–°–¢: –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ü–µ–Ω:', prices.length);
                
                let html = '<h3>–ó–∞–≥—Ä—É–∂–µ–Ω–æ ' + prices.length + ' —Ü–µ–Ω:</h3><ul>';
                prices.forEach(price => {
                    html += '<li>' + JSON.stringify(price) + '</li>';
                });
                html += '</ul>';
                
                result.innerHTML = html;
            } catch (error) {
                console.error('üî¥ –¢–ï–°–¢: –û—à–∏–±–∫–∞:', error);
                result.innerHTML = '<p style="color:red;">–û—à–∏–±–∫–∞: ' + error.message + '</p>';
            }
        });
    </script>
</body>
</html>

