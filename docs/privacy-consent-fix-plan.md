# –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –∞—Å–ø–µ–∫—Ç–æ–≤

## –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Å—Ç–∞ —Å–æ–≥–ª–∞—Å–∏—è —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ü–î:
1. **–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –±–æ—Ç–µ** - –ø—Ä–æ—Å—Ç–∞—è –≥–∞–ª–æ—á–∫–∞ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
2. **–ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –Ω–∞ —Å–∞–π—Ç–µ** - –ø—Ä–æ—Å—Ç–∞—è –≥–∞–ª–æ—á–∫–∞ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î

### –ü—Ä–æ–±–ª–µ–º—ã:
- ‚ùå –°–æ–≥–ª–∞—Å–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- ‚ùå –ù–µ—Ç —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π –∑–∞—â–∏—Ç—ã –≤ —Å–ª—É—á–∞–µ —Å–ø–æ—Ä–æ–≤
- ‚ùå –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –§–ó "–û –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"
- ‚ùå –†–∏—Å–∫ —à—Ç—Ä–∞—Ñ–æ–≤ –æ—Ç –†–æ—Å–∫–æ–º–Ω–∞–¥–∑–æ—Ä–∞

## –†–µ—à–µ–Ω–∏–µ

### 1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Å–æ–≥–ª–∞—Å–∏–π

```sql
-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
CREATE TABLE privacy_policies (
    id SERIAL PRIMARY KEY,
    version VARCHAR(20) NOT NULL,
    title VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    effective_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –¢–∞–±–ª–∏—Ü–∞ —Å–æ–≥–ª–∞—Å–∏–π —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ü–î
CREATE TABLE privacy_consents (
    id SERIAL PRIMARY KEY,
    client_id INTEGER REFERENCES clients(id) ON DELETE CASCADE,
    policy_version VARCHAR(20) NOT NULL,
    consent_type VARCHAR(50) NOT NULL, -- 'registration', 'certificate_purchase', 'training_booking'
    ip_address INET,
    user_agent TEXT,
    consented_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(client_id, consent_type, policy_version)
);
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –±–æ—Ç–µ

#### –¢–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å:
```javascript
// –ü—Ä–æ—Å—Ç–∞—è –≥–∞–ª–æ—á–∫–∞ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
if (msg.text === '‚úÖ –°–æ–≥–ª–∞—Å–µ–Ω —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏') {
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
}
```

#### –ù–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å:
```javascript
// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
async function showPrivacyPolicy(chatId) {
    const policy = await getActivePrivacyPolicy();
    
    return bot.sendMessage(chatId,
        `üìã *–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ (–≤–µ—Ä—Å–∏—è ${policy.version})*\n\n` +
        policy.content + '\n\n' +
        '–î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.',
        {
            parse_mode: 'Markdown',
            reply_markup: {
                keyboard: [
                    ['‚úÖ –°–æ–≥–ª–∞—Å–µ–Ω —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ü–î'],
                    ['‚ùå –ù–µ —Å–æ–≥–ª–∞—Å–µ–Ω']
                ],
                resize_keyboard: true
            }
        }
    );
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–≥–ª–∞—Å–∏—è
if (msg.text === '‚úÖ –°–æ–≥–ª–∞—Å–µ–Ω —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ü–î') {
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–≥–ª–∞—Å–∏–µ –≤ –ë–î
    await savePrivacyConsent(clientId, policy.version, 'registration', msg.from.id);
    
    // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
    await completeRegistration(msg);
}
```

### 3. –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–∫—É–ø–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

#### –ù–∞ —Å–∞–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å:
```html
<div class="privacy-consent">
    <label>
        <input type="checkbox" id="privacy-consent" required>
        –Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å <a href="/privacy-policy" target="_blank">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
        –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    </label>
</div>
```

#### –í –±—ç–∫–µ–Ω–¥–µ:
```javascript
// –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
async function purchaseCertificate(clientId, certificateData) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≥–ª–∞—Å–∏–µ
    const consent = await getPrivacyConsent(clientId, 'certificate_purchase');
    if (!consent) {
        throw new Error('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏–µ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ü–î');
    }
    
    // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø–æ–∫—É–ø–∫—É
    return createCertificate(certificateData);
}
```

### 4. –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏

#### –§—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–≥–ª–∞—Å–∏–π –∫–ª–∏–µ–Ω—Ç–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç —Å–æ–≥–ª–∞—Å–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

### 5. –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

#### –ü—Ä–æ–±–ª–µ–º–∞:
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –¥–∞–≤–∞–ª–∏ —Å–æ–≥–ª–∞—Å–∏–µ —á–µ—Ä–µ–∑ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
- –ù—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏—Ö —Å–æ–≥–ª–∞—Å–∏–µ

#### –†–µ—à–µ–Ω–∏–µ:
```javascript
// –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –≤—Ö–æ–¥–µ –≤ –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–∏—Ç–∏–∫—É
async function checkPrivacyConsent(chatId, clientId) {
    const consent = await getPrivacyConsent(clientId, 'registration');
    
    if (!consent) {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–∏—Ç–∏–∫—É –∏ –ø—Ä–æ—Å–∏–º —Å–æ–≥–ª–∞—Å–∏–µ
        await showPrivacyPolicy(chatId);
        return false; // –ë–ª–æ–∫–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º
    }
    
    return true;
}
```

## –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `privacy_policies`
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `privacy_consents`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã

### –≠—Ç–∞–ø 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∫–∞–∑–∞ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ–≥–ª–∞—Å–∏–π –ø—Ä–∏ –≤—Ö–æ–¥–µ

### –≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∞–π—Ç–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å —á–µ–∫–±–æ–∫—Å —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–∫—É–ø–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –±—ç–∫–µ–Ω–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≥–ª–∞—Å–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏

### –≠—Ç–∞–ø 4: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- [ ] –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–≥–ª–∞—Å–∏–π –∫–ª–∏–µ–Ω—Ç–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 5: –ú–∏–≥—Ä–∞—Ü–∏—è
- [ ] –£–≤–µ–¥–æ–º–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- [ ] –ü–æ–ª—É—á–∏—Ç—å —Å–æ–≥–ª–∞—Å–∏—è –æ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –¥–ª—è –Ω–µ—Å–æ–≥–ª–∞—Å–Ω—ã—Ö

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞:
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–≥–ª–∞—Å–∏–π
- ‚úÖ IP-–∞–¥—Ä–µ—Å–∞ –∏ –≤—Ä–µ–º—è —Å–æ–≥–ª–∞—Å–∏—è
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –§–ó

### –î–ª—è –±–∏–∑–Ω–µ—Å–∞:
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —à—Ç—Ä–∞—Ñ–æ–≤
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- ‚úÖ –î–æ–≤–µ—Ä–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

## –†–∏—Å–∫–∏ –±–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –®—Ç—Ä–∞—Ñ—ã:
- –î–æ 75,000‚ÇΩ –∑–∞ –ø–µ—Ä–≤–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ
- –î–æ 300,000‚ÇΩ –∑–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∞–π—Ç–∞ –†–æ—Å–∫–æ–º–Ω–∞–¥–∑–æ—Ä–æ–º

### –†–µ–ø—É—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏:
- –ü–æ—Ç–µ—Ä—è –¥–æ–≤–µ—Ä–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –æ—Ç–∑—ã–≤—ã
- –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏

