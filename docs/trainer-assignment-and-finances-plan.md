# –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤ –∏ –ü–ª–∞–Ω –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ç—Ä–µ–Ω–µ—Ä–æ–≤

## üìä –ê–ù–ê–õ–ò–ó –°–ò–°–¢–ï–ú–´ –§–ò–ù–ê–ù–°–û–í

### 1. –¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –¥–æ—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤

#### 1.1 **–î–û–•–û–î–´**

**A. –ü–æ—Å—Ç—É–ø–∏–≤—à–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ (refill_income):**
```sql
SELECT SUM(amount) FROM transactions 
WHERE type='refill' 
AND created_at BETWEEN start_date AND end_date
```
- –≠—Ç–æ –¥–µ–Ω—å–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–ø–æ–ª–Ω–∏–ª–∏ –Ω–∞ —Å–≤–æ–π –±–∞–ª–∞–Ω—Å
- –ù–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ä–∞—Å—Ö–æ–¥—ã

**B. –î–æ—Ö–æ–¥ –æ—Ç –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ (group_income):**
```
–î–ª—è –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ 'payment' —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º '–ì—Ä—É–ø–ø–æ–≤–∞—è':
1. –ù–∞—Ö–æ–¥–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –ø–æ –¥–∞—Ç–µ –∏ –≤—Ä–µ–º–µ–Ω–∏
2. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å
3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (confirmed)
4. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±—ã–ª–æ –ª–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞
5. –°—É–º–º–∏—Ä—É–µ–º payments –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
```

**C. –î–æ—Ö–æ–¥ –æ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ (individual_income):**
```
–î–ª—è –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ 'payment' —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è':
1. –ù–∞—Ö–æ–¥–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∑–∞–ø–∏—Å—å –≤ individual_training_sessions
2. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å
3. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±—ã–ª–æ –ª–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞
4. –°—É–º–º–∏—Ä—É–µ–º payments –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
```

#### 1.2 **–†–ê–°–•–û–î–´**

**A. –†–∞—Å—Ö–æ–¥—ã –Ω–∞ –≥—Ä—É–ø–ø–æ–≤—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (group_expenses):**
```sql
–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–≥—Ä—É–ø–ø–æ–≤—ã—Ö_—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ √ó —Å—Ç–æ–∏–º–æ—Å—Ç—å_–∞—Ä–µ–Ω–¥—ã_60–º–∏–Ω
```
- –°—á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ (status='confirmed')
- –°—á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à–∏–≤—à–∏–µ—Å—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- **–ù–ï –£–ß–ò–¢–´–í–ê–ï–¢–°–Ø:** –Ω–∞–ª–∏—á–∏–µ —Ç—Ä–µ–Ω–µ—Ä–∞

**B. –†–∞—Å—Ö–æ–¥—ã –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (individual_expenses):**
```sql
(–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_30–º–∏–Ω √ó —Å—Ç–æ–∏–º–æ—Å—Ç—å_–∞—Ä–µ–Ω–¥—ã_30–º–∏–Ω) +
(–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_60–º–∏–Ω √ó —Å—Ç–æ–∏–º–æ—Å—Ç—å_–∞—Ä–µ–Ω–¥—ã_60–º–∏–Ω)
```
- –°—á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à–∏–≤—à–∏–µ—Å—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- **–ù–ï –£–ß–ò–¢–´–í–ê–ï–¢–°–Ø:** –Ω–∞–ª–∏—á–∏–µ —Ç—Ä–µ–Ω–µ—Ä–∞

### 2. **–ü–†–û–ë–õ–ï–ú–´** —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–∏

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ #1: –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ —Ç—Ä–µ–Ω–µ—Ä–∞
```
–ì—Ä—É–ø–ø–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ë–ï–ó —Ç—Ä–µ–Ω–µ—Ä–∞:
- –î–æ—Ö–æ–¥: 5000‚ÇΩ
- –†–∞—Å—Ö–æ–¥: 1000‚ÇΩ (–∞—Ä–µ–Ω–¥–∞)
- –ü—Ä–∏–±—ã–ª—å: 4000‚ÇΩ ‚úÖ

–ì—Ä—É–ø–ø–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –° —Ç—Ä–µ–Ω–µ—Ä–æ–º:
- –î–æ—Ö–æ–¥: 5000‚ÇΩ
- –†–∞—Å—Ö–æ–¥: 1000‚ÇΩ (—Ç–æ–ª—å–∫–æ –∞—Ä–µ–Ω–¥–∞) ‚ùå
- –†–µ–∞–ª—å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥: 1000‚ÇΩ + 2500‚ÇΩ (–ó–ü —Ç—Ä–µ–Ω–µ—Ä–∞) = 3500‚ÇΩ
- –ü–æ–∫–∞–∑–∞–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å: 4000‚ÇΩ ‚ùå
- –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å: 1500‚ÇΩ ‚úÖ
```

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ #2: –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–∏–ø —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
```
–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ë–ï–ó —Ç—Ä–µ–Ω–µ—Ä–∞:
- –î–æ—Ö–æ–¥: 3000‚ÇΩ
- –†–∞—Å—Ö–æ–¥: 500‚ÇΩ (–∞—Ä–µ–Ω–¥–∞ 30–º–∏–Ω)
- –ü—Ä–∏–±—ã–ª—å: 2500‚ÇΩ ‚úÖ

–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –° —Ç—Ä–µ–Ω–µ—Ä–æ–º:
- –î–æ—Ö–æ–¥: 3000‚ÇΩ
- –†–∞—Å—Ö–æ–¥: 500‚ÇΩ (—Ç–æ–ª—å–∫–æ –∞—Ä–µ–Ω–¥–∞) ‚ùå
- –†–µ–∞–ª—å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥: 500‚ÇΩ + 1500‚ÇΩ (–ó–ü —Ç—Ä–µ–Ω–µ—Ä–∞) = 2000‚ÇΩ
- –ü–æ–∫–∞–∑–∞–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å: 2500‚ÇΩ ‚ùå
- –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å: 1000‚ÇΩ ‚úÖ
```

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ #3: –ó–ü —Ç—Ä–µ–Ω–µ—Ä–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ä–∞—Å—Ö–æ–¥–∞—Ö
- –í —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤ **–Ω–µ—Ç —Å—Ç—Ä–æ–∫–∏** "–ó–ü –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤"
- –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –í–ª–∞–¥–µ–ª–µ—Ü –Ω–µ –≤–∏–¥–∏—Ç —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–∏–±—ã–ª—å

---

## üéØ –†–ï–®–ï–ù–ò–ï: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ó–ü —Ç—Ä–µ–Ω–µ—Ä–æ–≤ –≤ —Ñ–∏–Ω–∞–Ω—Å—ã

### –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

#### 1. **–î–æ–±–∞–≤–∏—Ç—å –≤ —Ä–∞—Å—Ö–æ–¥—ã "–ó–ü –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤"**
```javascript
// –†–∞—Å—Ö–æ–¥—ã
{
  "–ì—Ä—É–ø–ø–æ–≤—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–∞—Ä–µ–Ω–¥–∞)": group_rental_expenses,
  "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–∞—Ä–µ–Ω–¥–∞)": individual_rental_expenses,
  "–ó–ü –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤": trainer_salary_expenses, // NEW
  "–û–±—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã": total_expenses
}
```

#### 2. **–†–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –ó–ü —Ç—Ä–µ–Ω–µ—Ä–æ–≤ –∏–∑ trainer_payments**
```sql
SELECT SUM(amount) 
FROM trainer_payments 
WHERE status IN ('pending', 'approved', 'paid')
AND created_at BETWEEN start_date AND end_date
```

#### 3. **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —Å —Ç—Ä–µ–Ω–µ—Ä–æ–º**
```javascript
{
  "group_with_trainer": { count, rental_cost, trainer_cost, total_cost },
  "group_without_trainer": { count, rental_cost, total_cost },
  "individual_with_trainer": { count, rental_cost, trainer_cost, total_cost },
  "individual_without_trainer": { count, rental_cost, total_cost }
}
```

---

## üéØ –ü–õ–ê–ù –ù–ê–ó–ù–ê–ß–ï–ù–ò–Ø –¢–†–ï–ù–ï–†–û–í –ß–ï–†–ï–ó –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨

### –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
- –ö–ª–∏–µ–Ω—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- –¢—Ä–µ–Ω–µ—Ä **–ù–ï** –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –≤—Ä—É—á–Ω—É—é –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ç—Ä–µ–Ω–µ—Ä–∞
- –ù–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ** - –∫–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ" ‚Üí –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
2. **–í—ã–±–æ—Ä —Ç—Ä–µ–Ω–µ—Ä–∞** - –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É** - –≤ –±–æ—Ç–µ (–§–ò–û —Ç—Ä–µ–Ω–µ—Ä–∞ + —Ç–µ–ª–µ—Ñ–æ–Ω)
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-–±–æ—Ç** - –∫—Ç–æ, –∫–æ–≥–¥–∞, –∫–∞–∫–æ–π —Ç—Ä–µ–Ω–µ—Ä

---

## üìã –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### **–≠–¢–ê–ü 1: –ê–Ω–∞–ª–∏–∑ –∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚úÖ (–¢–ï–ö–£–©–ò–ô)

#### –ó–∞–¥–∞—á–∏:
1. ‚úÖ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ñ–∏–Ω–∞–Ω—Å–æ–≤
2. ‚úÖ –í—ã—è–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞—Å—á–µ—Ç–æ–º —Ä–∞—Å—Ö–æ–¥–æ–≤
3. ‚úÖ –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ
4. üîÑ –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

### **–≠–¢–ê–ü 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ó–ü —Ç—Ä–µ–Ω–µ—Ä–æ–≤ –≤ —Ñ–∏–Ω–∞–Ω—Å—ã**

#### –ó–∞–¥–∞—á–∞ 2.1: –û–±–Ω–æ–≤–∏—Ç—å API `/api/finances/statistics`
**–§–∞–π–ª:** `src/routes/finances.js`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```javascript
// –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –¥–ª—è –ó–ü —Ç—Ä–µ–Ω–µ—Ä–æ–≤
const trainerSalaryResult = await pool.query(`
    SELECT COALESCE(SUM(amount), 0) as total
    FROM trainer_payments
    WHERE status IN ('pending', 'approved', 'paid')
    AND created_at BETWEEN $1 AND $2
`, [start_date, end_date]);

const trainerSalaryExpenses = parseFloat(trainerSalaryResult.rows[0].total);

// –î–æ–±–∞–≤–∏—Ç—å –≤ totalExpenses
const totalExpenses = groupExpenses + individualExpenses + trainerSalaryExpenses;
```

#### –ó–∞–¥–∞—á–∞ 2.2: –û–±–Ω–æ–≤–∏—Ç—å Frontend
**–§–∞–π–ª:** `public/js/admin.js`, —Ñ—É–Ω–∫—Ü–∏—è `loadFinances()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```javascript
<div class="summary-item">
    <span>–ó–ü –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤:</span>
    <span class="amount expense">${formatCurrency(data.trainer_salary_expenses)}</span>
</div>
```

---

### **–≠–¢–ê–ü 3: –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ**

#### –ó–∞–¥–∞—á–∞ 3.1: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
**–§–∞–π–ª—ã:**
- `public/admin.html` - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- `public/js/admin.js` - —Ñ—É–Ω–∫—Ü–∏—è `showTrainingDetails()`

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
1. –ö–∞–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
2. –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
3. –ì–¥–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä —Ç—Ä–µ–Ω–µ—Ä–∞

#### –ó–∞–¥–∞—á–∞ 3.2: –î–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ç—Ä–µ–Ω–µ—Ä–∞
**–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (modal):**
```html
<div class="form-group">
    <label>–¢—Ä–µ–Ω–µ—Ä:</label>
    <select id="assign-trainer" class="form-control">
        <option value="">–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω</option>
        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Ç—Ä–µ–Ω–µ—Ä–∞ -->
    </select>
    <button id="save-trainer-assignment" class="btn-primary">
        –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ç—Ä–µ–Ω–µ—Ä–∞
    </button>
</div>
```

#### –ó–∞–¥–∞—á–∞ 3.3: API –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ç—Ä–µ–Ω–µ—Ä–∞
**–ù–æ–≤—ã–π endpoint:** `PUT /api/individual-trainings/:id/assign-trainer`

**–õ–æ–≥–∏–∫–∞:**
```javascript
router.put('/:id/assign-trainer', async (req, res) => {
    const { id } = req.params;
    const { trainer_id } = req.body;
    
    // 1. –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ individual_training_sessions
    await pool.query(
        'UPDATE individual_training_sessions SET trainer_id = $1 WHERE id = $2',
        [trainer_id, id]
    );
    
    // 2. –°–æ–∑–¥–∞—Ç—å –≤—ã–ø–ª–∞—Ç—É —Ç—Ä–µ–Ω–µ—Ä—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    
    // 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É
    await notifyClientAboutTrainer(id, trainer_id);
    
    // 4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-–±–æ—Ç
    await notifyAdminAboutAssignment(id, trainer_id);
    
    res.json({ success: true });
});
```

#### –ó–∞–¥–∞—á–∞ 3.4: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–µ–Ω–µ—Ä–æ–≤ –ø–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
**–õ–æ–≥–∏–∫–∞:**
```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–ª—ã–∂–∏/—Å–Ω–æ—É–±–æ—Ä–¥) –∏–∑ equipment_type
const training = await pool.query(
    'SELECT equipment_type FROM individual_training_sessions WHERE id = $1',
    [id]
);

// –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–µ—Ä–æ–≤
const trainers = await pool.query(`
    SELECT id, full_name, phone 
    FROM trainers 
    WHERE is_active = TRUE
    AND (
        sport_type = $1 OR sport_type = 'both'
    )
    ORDER BY full_name
`, [training.rows[0].equipment_type]);
```

---

### **–≠–¢–ê–ü 4: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**

#### –ó–∞–¥–∞—á–∞ 4.1: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –≤ –±–æ—Ç–µ
**–§–∞–π–ª:** –°–æ–∑–¥–∞—Ç—å `src/services/trainer-assignment-notification.js`

**–°–æ–æ–±—â–µ–Ω–∏–µ:**
```
üéø –í–∞–º –Ω–∞–∑–Ω–∞—á–µ–Ω –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä!

–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞: 25.10.2025 –≤ 14:00
–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 60 –º–∏–Ω—É—Ç

üë®‚Äçüè´ –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: –¢–µ–±—è–∫–∏–Ω –î–∞–Ω–∏–ª
üìû –¢–µ–ª–µ—Ñ–æ–Ω: +7 (999) 123-45-67

–ñ–¥–µ–º –≤–∞—Å –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É!
```

#### –ó–∞–¥–∞—á–∞ 4.2: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-–±–æ—Ç
**–§–∞–π–ª:** `src/bot/admin-notify.js`

**–°–æ–æ–±—â–µ–Ω–∏–µ:**
```
‚úÖ –¢—Ä–µ–Ω–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω

–ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω
–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞: 25.10.2025 –≤ 14:00 (60 –º–∏–Ω)
–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: –¢–µ–±—è–∫–∏–Ω –î–∞–Ω–∏–ª

–ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.
```

---

## üîÑ –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –î–ï–ô–°–¢–í–ò–ô

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ó–ü –≤ —Ñ–∏–Ω–∞–Ω—Å—ã** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
1. –û–±–Ω–æ–≤–∏—Ç—å API `/api/finances/statistics`
2. –û–±–Ω–æ–≤–∏—Ç—å Frontend —Ñ–∏–Ω–∞–Ω—Å–æ–≤
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–æ–≤** (–≤–∞–∂–Ω–æ)
1. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
2. –î–æ–±–∞–≤–∏—Ç—å UI –≤ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
3. –°–æ–∑–¥–∞—Ç—å API –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Ç—Ä–µ–Ω–µ—Ä–æ–≤
5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)
1. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É
2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-–±–æ—Ç
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìä –û–¶–ï–ù–ö–ê –°–õ–û–ñ–ù–û–°–¢–ò

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ó–ü –≤ —Ñ–∏–Ω–∞–Ω—Å—ã: **–°–†–ï–î–ù–Ø–Ø** (2-3 —á–∞—Å–∞)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–∂–µ –≥–æ—Ç–æ–≤–∞ (trainer_payments —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- ‚úÖ –ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –≤ Excel

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–æ–≤: **–í–´–°–û–ö–ê–Ø** (4-6 —á–∞—Å–æ–≤)
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –∏–∑—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π UI —ç–ª–µ–º–µ–Ω—Ç
- ‚ö†Ô∏è –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π API endpoint
- ‚ö†Ô∏è –ù—É–∂–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–Ω–µ—Ä–æ–≤

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: **–ù–ò–ó–ö–ê–Ø** (1-2 —á–∞—Å–∞)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ –ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. **–ù–∞—á–∞—Ç—å —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ó–ü –≤ —Ñ–∏–Ω–∞–Ω—Å—ã**
- –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏
- –ë—ã—Å—Ç—Ä–∞—è –∑–∞–¥–∞—á–∞
- –°—Ä–∞–∑—É –¥–∞—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã

### 2. **–ó–∞—Ç–µ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–æ–≤**
- –≠—Ç–æ —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É —Ä—É—á–Ω–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- –£–ª—É—á—à–∏—Ç UX –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å

### 3. **–í –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
- –≠—Ç–æ —É–ª—É—á—à–∏—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é
- –ù–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

---

## ‚ùì –í–û–ü–†–û–°–´ –î–õ–Ø –£–¢–û–ß–ù–ï–ù–ò–Ø

### –í–æ–ø—Ä–æ—Å 1: –ó–ü —Ç—Ä–µ–Ω–µ—Ä–∞ –≤ —Ä–∞—Å—Ö–æ–¥–∞—Ö
**–ö–æ–≥–¥–∞ —É—á–∏—Ç—ã–≤–∞—Ç—å –ó–ü —Ç—Ä–µ–Ω–µ—Ä–∞ –≤ —Ä–∞—Å—Ö–æ–¥–∞—Ö?**
- A) –°—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ (status='pending')?
- B) –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è (status='approved')?
- C) –ü–æ—Å–ª–µ –≤—ã–ø–ª–∞—Ç—ã (status='paid')?

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∞—Ä–∏–∞–Ω—Ç B (approved) - –∫–æ–≥–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ –≤—ã–ø–ª–∞—Ç—É

### –í–æ–ø—Ä–æ—Å 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤—ã–ø–ª–∞—Ç—ã
**–°–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–ª–∞—Ç—É —Ç—Ä–µ–Ω–µ—Ä—É –ø—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏?**
- A) –î–∞, —Å—Ä–∞–∑—É —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ trainer_payments
- B) –ù–µ—Ç, —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∞—Ä–∏–∞–Ω—Ç B - —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

### –í–æ–ø—Ä–æ—Å 3: –û—Ç–º–µ–Ω–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
**–ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏?**
- A) –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è—Ç—å –≤—ã–ø–ª–∞—Ç—É —Ç—Ä–µ–Ω–µ—Ä—É
- B) –û—Å—Ç–∞–≤–ª—è—Ç—å –≤—ã–ø–ª–∞—Ç—É (—Ç—Ä–µ–Ω–µ—Ä –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–ª –≤—Ä–µ–º—è)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û–±—Å—É–¥–∏—Ç—å —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –±–∏–∑–Ω–µ—Å–∞

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –°–µ–π—á–∞—Å –Ω—É–∂–Ω–æ:
1. ‚úÖ –£—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–ª–∞–Ω
2. ‚ùì –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —É—Ç–æ—á–Ω–µ–Ω–∏—è
3. üöÄ –ù–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 1

**–ì–æ—Ç–æ–≤ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –≤–∞—à–µ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è!** üéØ
