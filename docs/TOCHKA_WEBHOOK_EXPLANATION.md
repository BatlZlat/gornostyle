# üîê Webhook Secret Key - –ó–∞—á–µ–º –Ω—É–∂–µ–Ω?

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:

**Webhook Secret** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **–ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –¢–æ—á–∫–∞ –ë–∞–Ω–∫–∞.

### –ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏:

```
–ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–µ–π–∫–æ–≤—ã–π webhook:
POST /api/kuliga/payment/callback
{
  "orderId": "kuliga-123",
  "status": "SUCCESS",
  "amount": 3500
}

–í–∞—à —Å–µ—Ä–≤–µ—Ä –ø–æ–¥—É–º–∞–µ—Ç: "–û, –ø–ª–∞—Ç–µ–∂ –ø—Ä–æ—à–µ–ª!"
–ò –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
–ë–ï–ó –†–ï–ê–õ–¨–ù–û–ô –û–ü–õ–ê–¢–´! üò±
```

### –° –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ–¥–ø–∏—Å–∏:

```
–¢–æ—á–∫–∞ –ë–∞–Ω–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook —Å –ø–æ–¥–ø–∏—Å—å—é:
POST /api/kuliga/payment/callback
Headers:
  X-Signature: a1b2c3d4e5f6... (HMAC-SHA256)

–í–∞—à —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
1. –í—ã—á–∏—Å–ª—è–µ—Ç –æ–∂–∏–¥–∞–µ–º—É—é –ø–æ–¥–ø–∏—Å—å (HMAC –æ—Ç payload + secret)
2. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –ø–æ–¥–ø–∏—Å—å—é
3. –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Üí –∑–∞–ø—Ä–æ—Å –æ—Ç –¢–æ—á–∫–∞ –ë–∞–Ω–∫–∞ ‚úÖ
4. –ï—Å–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Üí —Ñ–µ–π–∫, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º ‚ùå
```

---

## ‚ö†Ô∏è –ú–æ–∂–µ—Ç –ª–∏ –¢–æ—á–∫–∞ –ë–∞–Ω–∫ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å Webhook Secret?

**–í–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:**

1. **–ò—Å–ø–æ–ª—å–∑—É—é—Ç JWT –≤ payload** (–∫–∞–∫ –¢–∏–Ω—å–∫–æ—Ñ—Ñ)
   - –ü–æ–¥–ø–∏—Å—å –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ —Å–∞–º payload
   - –ù–µ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π secret

2. **–ò—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ–¥–ø–∏—Å—å –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ**
   - –ù—É–∂–µ–Ω Webhook Secret –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

3. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ–¥–ø–∏—Å—å** (—Ä–µ–¥–∫–æ, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ)
   - –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ IP –∞–¥—Ä–µ—Å–∞–º –¢–æ—á–∫–∞ –ë–∞–Ω–∫–∞
   - –ò–ª–∏ –ø–æ –¥—Ä—É–≥–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º

**–ö–∞–∫ —É–∑–Ω–∞—Ç—å:**
- –ò–∑—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: https://developers.tochka.com/docs/tochka-api/api/rabota-s-vebkhukami
- –ò–ª–∏ —Å–ø—Ä–æ—Å–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ

---

## ‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å:

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ï—Å–ª–∏ –µ—Å—Ç—å Webhook Secret**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ï—Å–ª–∏ –Ω–µ—Ç Webhook Secret**
- –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ –¥—Ä—É–≥–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º (IP, JWT –≤ payload)
- –ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤!)

---

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://developers.tochka.com/docs/tochka-api/api/rabota-s-vebkhukami
2. –ò—â–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –ø—Ä–æ "–ü–æ–¥–ø–∏—Å—å" –∏–ª–∏ "Signature"
3. –ï—Å–ª–∏ –µ—Å—Ç—å - –Ω—É–∂–µ–Ω secret
4. –ï—Å–ª–∏ –Ω–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏

