# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 09.10.2025  
**–í—Ä–µ–º—è:** 22:30 - 22:45 (–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥)

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

### 1. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
‚úÖ –¢–∞–±–ª–∏—Ü–∞ notification_logs —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞
‚úÖ –í—Å–µ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–î–∞—Ç–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫:** 10.10.2025 (–∑–∞–≤—Ç—Ä–∞)

**–ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π:** 4  
**–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤:** 3

#### –ö–ª–∏–µ–Ω—Ç—ã –Ω–∞ –∑–∞–≤—Ç—Ä–∞:
1. **–ù–µ–≤—Å—Ç—Ä—É–µ–≤–∞ –Æ–ª–∏—è –í–∏—Ç–∞–ª—å–µ–≤–Ω–∞** - 2 —Ä–µ–±–µ–Ω–∫–∞ –Ω–∞ –æ–¥–Ω–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ (17:30)
   - –ù–µ–≤—Å—Ç—Ä—É–µ–≤ –î–µ–º—å—è–Ω –†—É—Å–ª–∞–Ω–æ–≤–∏—á
   - –ù–µ–≤—Å—Ç—Ä—É–µ–≤ –ú–∏—Ä–æ–Ω –†—É—Å–ª–∞–Ω–æ–≤–∏—á
   - ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ü–†–ê–í–ò–õ–¨–ù–û –æ–±—ä–µ–¥–∏–Ω–∏–ª–∞ –≤ –û–î–ù–û —Å–æ–æ–±—â–µ–Ω–∏–µ

2. **–ù–æ–≤–∏–∫–æ–≤–∞ –ù–∞—Ç–∞–ª—å—è –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–Ω–æ–≤–Ω–∞** - –≤–∑—Ä–æ—Å–ª–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (16:00)

3. **–ó–∞–≤—å—è–ª–æ–≤–∞ –û–ª—å–≥–∞** - —Ä–µ–±–µ–Ω–æ–∫ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ (17:30)
   - –ó–∞–≤—å—è–ª–æ–≤ –ê—Ä—Å–µ–Ω–∏–π –ê—Ä—Ç–µ–º–æ–≤–∏—á

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏

#### –ü–æ–ø—ã—Ç–∫–∞ ‚Ññ1: –†–µ–∞–ª—å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 3 –æ—à–∏–±–∫–∏ "chat not found"

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–ª–∏–µ–Ω—Ç—ã –ª–∏–±–æ:
- –ù–µ –Ω–∞—á–∞–ª–∏ –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º (/start)
- –£–¥–∞–ª–∏–ª–∏ —á–∞—Ç —Å –±–æ—Ç–æ–º
- –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –±–æ—Ç–∞

**–í–∞–∂–Ω–æ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Telegram API. –ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

#### –ü–æ–ø—ã—Ç–∫–∞ ‚Ññ2: –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ (ID: 91)
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–£–°–ü–ï–®–ù–û!**

```
–ö–ª–∏–µ–Ω—Ç: –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫
Telegram ID: 546668421
–°—Ç–∞—Ç—É—Å: sent
–í—Ä–µ–º—è: 2025-10-09 20:42:26
```

**–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ!** –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º Telegram –±–æ—Ç–µ.

## üìä –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```sql
    date    | total | sent | failed 
------------+-------+------+--------
 2025-10-09 |     4 |    1 |      3
```

- **–í—Å–µ–≥–æ –ø–æ–ø—ã—Ç–æ–∫:** 4
- **–£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:** 1 (–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫)
- **–û—à–∏–±–æ–∫:** 3 (chat not found)

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ

1. ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î** - —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞
2. ‚úÖ **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫** - –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –Ω–∞ –∑–∞–≤—Ç—Ä–∞
3. ‚úÖ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–µ—Ç–µ–π –æ–¥–Ω–æ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è
4. ‚úÖ **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π** - –∫—Ä–∞—Å–∏–≤—ã–µ, –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ
5. ‚úÖ **–û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Telegram** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤
6. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ë–î
7. ‚úÖ **–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –ø—Ä–∏–µ—Ö–∞—Ç—å –∑–∞ 10-15 –º–∏–Ω—É—Ç

## üìù –í–∞–∂–Ω—ã–µ –≤—ã–≤–æ–¥—ã

### –ü—Ä–æ –æ—à–∏–±–∫—É "chat not found"

–≠—Ç–æ **–Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ** –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
- Telegram –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ—Ç—É –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É /start
- –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±–æ—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:** –ö–ª–∏–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

### –ö–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏

1. ‚úÖ –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è (—É—Å–ø–µ—à–Ω—ã–µ –∏ –Ω–µ—É–¥–∞—á–Ω—ã–µ)
2. ‚úÖ –û—à–∏–±–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `error_message`
3. ‚úÖ –°—Ç–∞—Ç—É—Å —á–µ—Ç–∫–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç: `sent` –∏–ª–∏ `failed`
4. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å

## üöÄ –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. –ù–∞ —Ö–æ—Å—Ç–µ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ `.env`
- ‚úÖ –ö–ª–∏–µ–Ω—Ç—ã –∫–æ–Ω—Ç–∞–∫—Ç–∏—Ä—É—é—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º –±–æ—Ç–æ–º
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –ë–î

### 2. –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

#### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ö–æ—Å—Ç–µ
```bash
pm2 restart gornostyle
```

#### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
```bash
pm2 logs gornostyle
```

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∑–∞–¥–∞—á...
‚úì –ó–∞–¥–∞—á–∞ "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö" –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ 21:00 (–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥)
–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—â–µ–Ω. –ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á: 1
```

### 3. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞!

–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ **21:00** —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç:
1. –ò—Å–∫–∞—Ç—å –≤—Å–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –Ω–∞ –∑–∞–≤—Ç—Ä–∞
2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º
3. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫—Ä–∞—Å–∏–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
4. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```bash
PGPASSWORD='Nemezida2324%)' psql -h 90.156.210.24 -p 5432 -U batl-zlat -d skisimulator -c "
SELECT 
    nl.sent_at,
    c.full_name,
    nl.training_date,
    nl.status
FROM notification_logs nl
JOIN clients c ON nl.client_id = c.id
ORDER BY nl.sent_at DESC
LIMIT 10;"
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é
```bash
PGPASSWORD='Nemezida2324%)' psql -h 90.156.210.24 -p 5432 -U batl-zlat -d skisimulator -c "
SELECT 
    DATE(sent_at) as date,
    COUNT(*) as total,
    SUM(CASE WHEN status = 'sent' THEN 1 ELSE 0 END) as sent,
    SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END) as failed
FROM notification_logs
WHERE sent_at >= CURRENT_DATE - INTERVAL '7 days'
GROUP BY DATE(sent_at)
ORDER BY date DESC;"
```

### –ö–ª–∏–µ–Ω—Ç—ã —Å –æ—à–∏–±–∫–∞–º–∏
```bash
PGPASSWORD='Nemezida2324%)' psql -h 90.156.210.24 -p 5432 -U batl-zlat -d skisimulator -c "
SELECT 
    c.full_name,
    nl.telegram_id,
    nl.error_message,
    nl.sent_at
FROM notification_logs nl
JOIN clients c ON nl.client_id = c.id
WHERE nl.status = 'failed'
ORDER BY nl.sent_at DESC
LIMIT 10;"
```

## üì± –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞

–°–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–ª–∏–µ–Ω—Ç—É
node src/scripts/test-single-notification.js <client_id> <date>

# –ü—Ä–∏–º–µ—Ä: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫—É (ID 91) –Ω–∞ –∑–∞–≤—Ç—Ä–∞
node src/scripts/test-single-notification.js 91 2025-10-10
```

## üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤:
- **NOTIFICATION_SYSTEM_SUMMARY.md** - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞
- **docs/notification-setup-guide.md** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- **docs/notification-system.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## ‚úÖ –ò—Ç–æ–≥

**–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞!**

- ‚úÖ –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ 21:00

**–°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫:** –ó–∞–≤—Ç—Ä–∞ –≤ 21:00 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

**–ê–≤—Ç–æ—Ä:** –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ì–æ—Ä–Ω–æ—Å—Ç–∞–π–ª72  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

